{% extends "base.html" %}
{% import "bootstrap5/form.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}Flasky - Post{% endblock %}

{% block page_content %}
{% set showhide = 'show' %}
{% include '_posts.html' %}
{% if posts[0].status == posts[0].STATUS_PUBLIC %}
    <div class="ms-4 mt-3">
        <h4 id="comments">
            {% if posts[0].comments.count() == 0 %}
            Комментариев нет
            {% else %}
            Комментарии
            {% endif %}
        </h4>
    </div>
    <div class="ms-4">
    {% if current_user.can(Permission.COMMENT) %}
        <div class="comment-form">
            {{ wtf.render_form(form) }}
        </div>
        {% endif %}
        {% include '_comments.html' %}
        {% if pagination %}
        <div class="pagination">
            {{ macros.pagination_widget(pagination, '.post', fragment='#comments', id=posts[0].id) }}
        </div>
    {% endif %}
    </div>
{% endif %}
{% endblock %}
